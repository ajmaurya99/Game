var devMode=false;var base_url="";if(!devMode){base_url="https://tastytreatofficial.com/indian-chabao-league/backend/api/"}else{base_url="http://localhost/snehal/chak-chak-chabao-game/backend/api/"}var storage=Storages.localStorage;var game,WebFontConfig,preloadSprite,is_register;$(document).ready(function(){$("#register-btn").on("click",function(){$(".login").hide();$(".register").show()});$("#login-btn").on("click",function(){$(".register").hide();$(".login").show()})});window.onload=function(){var a=storage.get("user");if(a&&a.udid){$(".GameForm").hide();b()}else{$(".GameForm").show();$(".login").show();$(".register").hide()}function b(){game=new Phaser.Game(620,960,Phaser.AUTO,"",{},true);game.state.add("boot",Product.Boot);game.state.add("load",Product.Load);game.state.add("menu",Product.Menu);game.state.add("howToPlay",Product.HowToPlay);game.state.add("play",Product.Play);game.state.add("gameOver",Product.GameOver);game.state.start("boot")}function c(d){storage.set("user",JSON.stringify(d.data));storage.set("bestScore",d.data.score)}$.validator.addMethod("emailFormat",function(f,d){if(f){var g=new RegExp(/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i);var e=g.test(f);if(!e){return false}else{return true}}else{return true}},"Please enter Valid Email.");$.validator.addMethod("contactformat",function(f,d){var g=new RegExp(/^[0]?[789]\d{9}$/);var e=g.test(f);if(!e){return false}else{return true}},"Please enter Valid Number.");$.validator.addMethod("noSpace",function(g,d){var e=new RegExp(/^[a-zA-Z-,]+(\s{0,1}[a-zA-Z-, ])*$/);var f=e.test(g);if(!f){return false}else{return true}},"Please enter Correct Name.");$("#loginform").validate({rules:{mobile:{required:true,number:true,contactformat:true,minlength:10},},submitHandler:function(){var d=$("#loginform").serialize();$.ajax({type:"post",url:base_url+"users/login",dataType:"json",data:d}).done(function(e){if(e.status==1){dataLayer.push({event:"LoginFormSubmitted",formName:"Login Form",eventLabel:"Login Successful"});$("#loginform")[0].reset();c(e);alertify.alert().setHeader("").setting({label:"OK",message:e.message,onok:function(){$(".login").hide();$(".GameForm").hide();b()}}).show()}else{alertify.alert().setHeader("").setting({label:"Register Now",message:e.message,onok:function(){$(".login").hide();$(".register").show()}}).show()}}).fail(function(e){console.log(e)})}});$("#registerform").validate({rules:{name:{required:true,noSpace:true},email:{email:true,emailFormat:true},mobile:{required:true,number:true,contactformat:true,minlength:10},city:{required:true}},submitHandler:function(){var d=$("#registerform").serialize();console.log(d);$.ajax({type:"post",url:base_url+"users/register",dataType:"json",data:d}).done(function(e){if(e.status==1){dataLayer.push({event:"RegisterFormSubmitted",formName:"Register Form",eventLabel:"Registration Successful"});is_register=true;$("#registerform")[0].reset();c(e);alertify.alert().setHeader("").setting({label:"OK",message:e.message,onok:function(){$(".GameForm").hide();$(".register").hide();b()}}).show()}else{alertify.alert(e.message);alertify.alert().setHeader("").setting({label:"Login Now",message:e.message,onok:function(){$(".register").hide();$(".login").show()}}).show()}}).fail(function(e){console.log(e)})}})};