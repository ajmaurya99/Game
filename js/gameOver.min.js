Product.GameOver=function(a){this._fontStyle={font:"Luckiest Guy, cursive",align:"center",smoothed:true};this._txtTapToRestart=null;this._toggleColor=false};Product.GameOver.prototype={preload:function(){},create:function(){Product._greetingType=["greeting1","greeting2","greeting3","greeting4","greeting5","greeting6"];var g=this.add.text(this.world.centerX,this.world.centerY-400,"Current Score",this._fontStyle);g.fontSize=30;g.fill="#ffffff";g.anchor.set(0.5,0.5);if(typeof(Storage)!=="undefined"){var d=this.add.text(this.world.centerX,this.world.centerY-370,Product._score,this._fontStyle);d.fontSize=32;d.fill="#ffffff";d.anchor.set(0.5,0.5);var g=this.add.text(this.world.centerX,this.world.centerY-320,"Highest Score",this._fontStyle);g.fontSize=30;g.fill="#ec1f27";g.anchor.set(0.5,0.5);var c=this.add.text(this.world.centerX,this.world.centerY-285,storage.get("bestScore"),this._fontStyle);c.fontSize=32;c.fill="#ec1f27";c.anchor.set(0.5,0.5)}var i=this.add.image(this.world.centerX,this.world.centerY-100,this.greetingText(),this._fontStyle);i.fontSize=38;i.fill="#ec1f27";i.anchor.set(0.5,0.5);var f=this.add.image(this.world.centerX,this.world.centerY+40,"gameOverText");f.anchor.set(0.5,0.5);var e=this.add.button(this.world.centerX,this.world.centerY+200,"replay",this.play,this);e.anchor.set(0.5,0.5);var h=this.add.button(this.world.centerX,this.world.centerY+325,"home",this.menu,this);h.anchor.set(0.5,0.5);var b=this.add.button(this.world.centerX,this.world.centerY-220,"leaderBoard",this.scoreBoard,this);b.anchor.set(0.5,0.5);var a=this.add.button(Product.GAME_WIDTH-60,10,"close",this.close,this);a.scale.setTo(0.6,0.6);a.anchor.set(0.5,-0.5);if(Product._score>=storage.get("bestScore")){update_score()}},scoreBoard:function(){custom_event("LeaderBoardClick","Leader Board");var a=document.getElementById("simpleModal");a.style.display="block";getMessage()},greetingText:function(){if(Product._score<100){return Product._greetingType[0]}else{if(Product._score>=100&&Product._score<=200){return Product._greetingType[1]}else{if(Product._score>200&&Product._score<=300){return Product._greetingType[2]}else{if(Product._score>300&&Product._score<=400){return Product._greetingType[3]}else{if(Product._score>400&&Product._score<=500){return Product._greetingType[4]}else{if(Product._score>500){return Product._greetingType[5]}}}}}}},changeTxtColor:function(){if(!this._toggleColor){this._txtTapToRestart.fill="#f04848";this._toggleColor=true}else{this._txtTapToRestart.fill="#f02222";this._toggleColor=false}},close:function(a){custom_event("CloseButtonClick","Close Button");this.state.start("menu",true,false)},play:function(){custom_event("ReplayClick","Replay");this.state.start("play")},menu:function(){custom_event("HomeButtonClick","Home Button");this.state.start("menu",true,false)}};function update_score(){var a=storage.get("user");var b={udid:a.udid,score:Product._score};$.ajax({type:"post",url:base_url+"users/score_update",dataType:"json",data:b}).done(function(c){if(c.status==1){}else{}}).fail(function(c){console.log(c)})}function getMessage(){var a=storage.get("user");var b={udid:a.udid};$.ajax({type:"post",url:base_url+"users/score_board",dataType:"json",data:b}).done(function(e){var c="";if(e.status==1){var f=e.data;for(var d=0;d<f.length;d++){if(f[d]["is_user"]){c+='<tr class="user-score">'}else{c+="<tr>"}c+="<td>"+f[d]["rank"]+"</td><td>"+f[d]["score"]+"</td></tr>"}document.getElementById("score-body").innerHTML=c}else{c="<h4>";c+=e.message+"</h4>";document.getElementById("message-modal-body").innerHTML=c}}).fail(function(c){console.log(c)})}function closeModal(){var a=document.getElementById("simpleModal");a.style.display="none"}function clickOutside(b){var a=document.getElementById("simpleModal");if(b.target==a){a.style.display="none"}};