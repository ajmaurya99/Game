(function(a){var d=false;if(typeof define==="function"&&define.amd){define(a);d=true}if(typeof exports==="object"){module.exports=a();d=true}if(!d){var c=window.Storages;var b=window.Storages=a();b.noConflict=function(){window.Storages=c;return b}}}(function(){var e={};var u=e.toString;var q=e.hasOwnProperty;var m=q.toString;var y=m.call(Object);var c=Object.getPrototypeOf;var t={};var w="ls_";var v="ss_";function b(){var F=this._type,A=arguments.length,J=window[F],I=arguments,z=I[0],C,H,E,D,B;if(A<1){throw new Error("Minimum 1 argument must be given")}else{if(Array.isArray(z)){H={};for(D in z){if(z.hasOwnProperty(D)){C=z[D];try{H[C]=JSON.parse(J.getItem(C))}catch(G){H[C]=J.getItem(C)}}}return H}else{if(A==1){try{return JSON.parse(J.getItem(z))}catch(G){return J.getItem(z)}}else{try{H=JSON.parse(J.getItem(z))}catch(G){throw new ReferenceError(z+" is not defined in this storage")}for(D=1;D<A-1;D++){H=H[I[D]];if(H===undefined){throw new ReferenceError([].slice.call(I,1,D+1).join(".")+" is not defined in this storage")}}if(Array.isArray(I[D])){E=H;H={};for(B in I[D]){if(I[D].hasOwnProperty(B)){H[I[D][B]]=E[I[D][B]]}}return H}else{return H[I[D]]}}}}}function s(){var G=this._type,B=arguments.length,K=window[G],J=arguments,A=J[0],z=J[1],C,D=isNaN(z)?{}:[],I,F,E;if(B<1||!h(A)&&B<2){throw new Error("Minimum 2 arguments must be given or first parameter must be an object")}else{if(h(A)){for(E in A){if(A.hasOwnProperty(E)){C=A[E];if(!h(C)&&!this.alwaysUseJson){K.setItem(E,C)}else{K.setItem(E,JSON.stringify(C))}}}return A}else{if(B==2){if(typeof z==="object"||this.alwaysUseJson){K.setItem(A,JSON.stringify(z))}else{K.setItem(A,z)}return z}else{try{F=K.getItem(A);if(F!=null){D=JSON.parse(F)}}catch(H){}F=D;for(E=1;E<B-2;E++){C=J[E];I=isNaN(J[E+1])?"object":"array";if(!F[C]||I=="object"&&!h(F[C])||I=="array"&&!Array.isArray(F[C])){if(I=="array"){F[C]=[]}else{F[C]={}}}F=F[C]}F[J[E]]=J[E+1];K.setItem(A,JSON.stringify(D));return D}}}}function l(){var F=this._type,A=arguments.length,I=window[F],H=arguments,z=H[0],C,D,E,B;if(A<1){throw new Error("Minimum 1 argument must be given")}else{if(Array.isArray(z)){for(E in z){if(z.hasOwnProperty(E)){I.removeItem(z[E])}}return true}else{if(A==1){I.removeItem(z);return true}else{try{C=D=JSON.parse(I.getItem(z))}catch(G){throw new ReferenceError(z+" is not defined in this storage")}for(E=1;E<A-1;E++){D=D[H[E]];if(D===undefined){throw new ReferenceError([].slice.call(H,1,E).join(".")+" is not defined in this storage")}}if(Array.isArray(H[E])){for(B in H[E]){if(H[E].hasOwnProperty(B)){delete D[H[E][B]]}}}else{delete D[H[E]]}I.setItem(z,JSON.stringify(C));return true}}}}function o(z){var B=f.call(this),A;for(A in B){if(B.hasOwnProperty(A)){l.call(this,B[A])}}if(z){for(A in t.namespaceStorages){if(t.namespaceStorages.hasOwnProperty(A)){i(A)}}}}function n(){var A=arguments.length,z=arguments,C=z[0],D;if(A==0){return(f.call(this).length==0)}else{if(Array.isArray(C)){for(D=0;D<C.length;D++){if(!n.call(this,C[D])){return false}}return true}else{try{var B=b.apply(this,arguments);if(!Array.isArray(z[A-1])){B={totest:B}}for(D in B){if(B.hasOwnProperty(D)&&!((h(B[D])&&d(B[D]))||(Array.isArray(B[D])&&!B[D].length)||(typeof B[D]!=="boolean"&&!B[D]))){return false}}return true}catch(E){return true}}}}function k(){var A=arguments.length,z=arguments,C=z[0],D;if(A<1){throw new Error("Minimum 1 argument must be given")}if(Array.isArray(C)){for(D=0;D<C.length;D++){if(!k.call(this,C[D])){return false}}return true}else{try{var B=b.apply(this,arguments);if(!Array.isArray(z[A-1])){B={totest:B}}for(D in B){if(B.hasOwnProperty(D)&&!(B[D]!==undefined&&B[D]!==null)){return false}}return true}catch(E){return false}}}function f(){var G=this._type,z=arguments.length,C=window[G],E=[],F={};if(z>0){F=b.apply(this,arguments)}else{F=C}if(F&&F._cookie){var D=Cookies.get();for(var B in D){if(D.hasOwnProperty(B)&&B!=""){E.push(B.replace(F._prefix,""))}}}else{for(var A in F){if(F.hasOwnProperty(A)){E.push(A)}}}return E}function i(z){if(!z||typeof z!="string"){throw new Error("First parameter must be a string")}if(a){if(!window.localStorage.getItem(z)){window.localStorage.setItem(z,"{}")}if(!window.sessionStorage.getItem(z)){window.sessionStorage.setItem(z,"{}")}}else{if(!window.localCookieStorage.getItem(z)){window.localCookieStorage.setItem(z,"{}")}if(!window.sessionCookieStorage.getItem(z)){window.sessionCookieStorage.setItem(z,"{}")}}var A={localStorage:g({},t.localStorage,{_ns:z}),sessionStorage:g({},t.sessionStorage,{_ns:z})};if(r){if(!window.cookieStorage.getItem(z)){window.cookieStorage.setItem(z,"{}")}A.cookieStorage=g({},t.cookieStorage,{_ns:z})}t.namespaceStorages[z]=A;return A}function p(z){var B="jsapi";try{if(!window[z]){return false}window[z].setItem(B,B);window[z].removeItem(B);return true}catch(A){return false}}function h(B){var A,z;if(!B||u.call(B)!=="[object Object]"){return false}A=c(B);if(!A){return true}z=q.call(A,"constructor")&&A.constructor;return typeof z==="function"&&m.call(z)===y}function d(A){var z;for(z in A){return false}return true}function g(){var C=1;var z=arguments[0];for(;C<arguments.length;C++){var A=arguments[C];for(var B in A){if(A.hasOwnProperty(B)){z[B]=A[B]}}}return z}var a=p("localStorage");var r=typeof Cookies!=="undefined";var x={_type:"",_ns:"",_callMethod:function(B,z){z=Array.prototype.slice.call(z);var C=[],A=z[0];if(this._ns){C.push(this._ns)}if(typeof A==="string"&&A.indexOf(".")!==-1){z.shift();[].unshift.apply(z,A.split("."))}[].push.apply(C,z);return B.apply(this,C)},alwaysUseJson:false,get:function(){if(!a&&!r){return null}return this._callMethod(b,arguments)},set:function(){var A=arguments.length,z=arguments,B=z[0];if(A<1||!h(B)&&A<2){throw new Error("Minimum 2 arguments must be given or first parameter must be an object")}if(!a&&!r){return null}if(h(B)&&this._ns){for(var C in B){if(B.hasOwnProperty(C)){this._callMethod(s,[C,B[C]])}}return B}else{var D=this._callMethod(s,z);if(this._ns){return D[B.split(".")[0]]}else{return D}}},remove:function(){if(arguments.length<1){throw new Error("Minimum 1 argument must be given")}if(!a&&!r){return null}return this._callMethod(l,arguments)},removeAll:function(z){if(!a&&!r){return null}if(this._ns){this._callMethod(s,[{}]);return true}else{return this._callMethod(o,[z])}},isEmpty:function(){if(!a&&!r){return null}return this._callMethod(n,arguments)},isSet:function(){if(arguments.length<1){throw new Error("Minimum 1 argument must be given")}if(!a&&!r){return null}return this._callMethod(k,arguments)},keys:function(){if(!a&&!r){return null}return this._callMethod(f,arguments)}};if(r){if(!window.name){window.name=Math.floor(Math.random()*100000000)}var j={_cookie:true,_prefix:"",_expires:null,_path:null,_domain:null,setItem:function(A,z){Cookies.set(this._prefix+A,z,{expires:this._expires,path:this._path,domain:this._domain})},getItem:function(z){return Cookies.get(this._prefix+z)},removeItem:function(z){return Cookies.remove(this._prefix+z,{path:this._path})},clear:function(){var A=Cookies.get();for(var z in A){if(A.hasOwnProperty(z)&&z!=""){if(!this._prefix&&z.indexOf(w)===-1&&z.indexOf(v)===-1||this._prefix&&z.indexOf(this._prefix)===0){Cookies.remove(z)}}}},setExpires:function(z){this._expires=z;return this},setPath:function(z){this._path=z;return this},setDomain:function(z){this._domain=z;return this},setConf:function(z){if(z.path){this._path=z.path}if(z.domain){this._domain=z.domain}if(z.expires){this._expires=z.expires}return this},setDefaultConf:function(){this._path=this._domain=this._expires=null}};if(!a){window.localCookieStorage=g({},j,{_prefix:w,_expires:365*10});window.sessionCookieStorage=g({},j,{_prefix:v+window.name+"_"})}window.cookieStorage=g({},j);t.cookieStorage=g({},x,{_type:"cookieStorage",setExpires:function(z){window.cookieStorage.setExpires(z);return this},setPath:function(z){window.cookieStorage.setPath(z);return this},setDomain:function(z){window.cookieStorage.setDomain(z);return this},setConf:function(z){window.cookieStorage.setConf(z);return this},setDefaultConf:function(){window.cookieStorage.setDefaultConf();return this}})}t.initNamespaceStorage=function(z){return i(z)};if(a){t.localStorage=g({},x,{_type:"localStorage"});t.sessionStorage=g({},x,{_type:"sessionStorage"})}else{t.localStorage=g({},x,{_type:"localCookieStorage"});t.sessionStorage=g({},x,{_type:"sessionCookieStorage"})}t.namespaceStorages={};t.removeAllStorages=function(z){t.localStorage.removeAll(z);t.sessionStorage.removeAll(z);if(t.cookieStorage){t.cookieStorage.removeAll(z)}if(!z){t.namespaceStorages={}}};t.alwaysUseJsonInStorage=function(z){x.alwaysUseJson=z;t.localStorage.alwaysUseJson=z;t.sessionStorage.alwaysUseJson=z;if(t.cookieStorage){t.cookieStorage.alwaysUseJson=z}};return t}));